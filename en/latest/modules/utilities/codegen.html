

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Codegen &mdash; Diofant 0.10.1.dev230+g043df8d documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Decorator" href="decorator.html" />
    <link rel="prev" title="Autowrap Module" href="autowrap.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Diofant
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/index.html">Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../core.html">Core</a></li>
<li class="toctree-l2"><a class="reference internal" href="../combinatorics/index.html">Combinatorics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ntheory.html">Number Theory</a></li>
<li class="toctree-l2"><a class="reference internal" href="../concrete.html">Concrete Mathematics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../functions/index.html">Mathematical Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../geometry/index.html">Geometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../integrals.html">Integrals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../logic.html">Logic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../domains.html">Domains</a></li>
<li class="toctree-l2"><a class="reference internal" href="../matrices/index.html">Matrices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../polys.html">Polynomials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../printing.html">Printing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../interactive.html">Interactive</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plotting.html">Plotting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../series.html">Series</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sets.html">Sets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../simplify/simplify.html">Simplify</a></li>
<li class="toctree-l2"><a class="reference internal" href="../stats.html">Stats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../solvers/index.html">Solvers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tensor/index.html">Tensors</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Utilities</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="autowrap.html">Autowrap Module</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Codegen</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#implementation-details">Implementation Details</a></li>
<li class="toctree-l4"><a class="reference internal" href="#routine">Routine</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-diofant.utilities.codegen">API Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="decorator.html">Decorator</a></li>
<li class="toctree-l3"><a class="reference internal" href="enumerative.html">Enumerative</a></li>
<li class="toctree-l3"><a class="reference internal" href="iterables.html">Iterables</a></li>
<li class="toctree-l3"><a class="reference internal" href="lambdify.html">Lambdify</a></li>
<li class="toctree-l3"><a class="reference internal" href="memoization.html">Memoization</a></li>
<li class="toctree-l3"><a class="reference internal" href="misc.html">Miscellaneous</a></li>
<li class="toctree-l3"><a class="reference internal" href="randtest.html">Randomised Testing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../parsing.html">Parsing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../calculus/index.html">Calculus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../diffgeom.html">Differential Geometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vector/index.html">Vectors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../internals/index.html">Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guide.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../aboutus.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources.html">Bibliography</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Diofant</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Reference</a> &raquo;</li>
        
          <li><a href="index.html">Utilities</a> &raquo;</li>
        
      <li>Codegen</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/modules/utilities/codegen.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="codegen">
<h1>Codegen<a class="headerlink" href="#codegen" title="Permalink to this headline">¶</a></h1>
<p>This module provides functionality to generate directly compilable code from
Diofant expressions.  The <code class="docutils literal notranslate"><span class="pre">codegen</span></code> function is the user interface to the code
generation functionality in Diofant.  Some details of the implementation is given
below for advanced users that may want to use the framework directly.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">codegen</span></code> callable is not in the diofant namespace automatically,
to use it you must first execute</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">diofant.utilities.codegen</span> <span class="k">import</span> <span class="n">codegen</span>
</pre></div>
</div>
</div>
<div class="section" id="implementation-details">
<h2>Implementation Details<a class="headerlink" href="#implementation-details" title="Permalink to this headline">¶</a></h2>
<p>Here we present the most important pieces of the internal structure, as
advanced users may want to use it directly, for instance by subclassing a code
generator for a specialized application.  <strong>It is very likely that you would
prefer to use the codegen() function documented above.</strong></p>
<p>Basic assumptions:</p>
<ul class="simple">
<li>A generic Routine data structure describes the routine that must be translated
into C/Fortran/… code. This data structure covers all features present in
one or more of the supported languages.</li>
<li>Descendants from the CodeGen class transform multiple Routine instances into
compilable code. Each derived class translates into a specific language.</li>
<li>In many cases, one wants a simple workflow. The friendly functions in the last
part are a simple api on top of the Routine/CodeGen stuff. They are easier to
use, but are less powerful.</li>
</ul>
</div>
<div class="section" id="routine">
<h2>Routine<a class="headerlink" href="#routine" title="Permalink to this headline">¶</a></h2>
<p>The Routine class is a very important piece of the codegen module. Viewing the
codegen utility as a translator of mathematical expressions into a set of
statements in a programming language, the Routine instances are responsible for
extracting and storing information about how the math can be encapsulated in a
function call.  Thus, it is the Routine constructor that decides what arguments
the routine will need and if there should be a return value.</p>
</div>
<div class="section" id="module-diofant.utilities.codegen">
<span id="api-reference"></span><h2>API Reference<a class="headerlink" href="#module-diofant.utilities.codegen" title="Permalink to this headline">¶</a></h2>
<p>module for generating C, C++, Fortran77, Fortran90 and Octave/Matlab routines
that evaluate diofant expressions.  This module is work in progress.  Only the
milestones with a ‘+’ character in the list below have been completed.</p>
<p>— How is diofant.utilities.codegen different from diofant.printing.ccode? —</p>
<p>We considered the idea to extend the printing routines for diofant functions in
such a way that it prints complete compilable code, but this leads to a few
unsurmountable issues that can only be tackled with dedicated code generator:</p>
<ul class="simple">
<li>For C, one needs both a code and a header file, while the printing routines
generate just one string. This code generator can be extended to support
.pyf files for f2py.</li>
<li>Diofant functions are not concerned with programming-technical issues, such
as input, output and input-output arguments. Other examples are contiguous
or non-contiguous arrays, including headers of other libraries such as gsl
or others.</li>
<li>It is highly interesting to evaluate several diofant functions in one C
routine, eventually sharing common intermediate results with the help
of the cse routine. This is more than just printing.</li>
<li>From the programming perspective, expressions with constants should be
evaluated in the code generator as much as possible. This is different
for printing.</li>
</ul>
<p>— Basic assumptions —</p>
<ul class="simple">
<li>A generic Routine data structure describes the routine that must be
translated into C/Fortran/… code. This data structure covers all
features present in one or more of the supported languages.</li>
<li>Descendants from the CodeGen class transform multiple Routine instances
into compilable code. Each derived class translates into a specific
language.</li>
<li>In many cases, one wants a simple workflow. The friendly functions in the
last part are a simple api on top of the Routine/CodeGen stuff. They are
easier to use, but are less powerful.</li>
</ul>
<p>— Milestones —</p>
<ul class="simple">
<li>First working version with scalar input arguments, generating C code,
tests</li>
<li>Friendly functions that are easier to use than the rigorous
Routine/CodeGen workflow.</li>
<li>Integer and Real numbers as input and output</li>
<li>Output arguments</li>
<li>InputOutput arguments</li>
<li>Sort input/output arguments properly</li>
<li>Contiguous array arguments (numpy matrices)</li>
<li>Also generate .pyf code for f2py (in autowrap module)</li>
<li>Isolate constants and evaluate them beforehand in double precision</li>
<li>Fortran 90</li>
<li>Octave/Matlab</li>
</ul>
<ul class="simple">
<li>Common Subexpression Elimination</li>
<li>User defined comments in the generated code</li>
<li>Optional extra include lines for libraries/objects that can eval special
functions</li>
<li>Test other C compilers and libraries: gcc, tcc, libtcc, gcc+gsl, …</li>
<li>Contiguous array arguments (diofant matrices)</li>
<li>Non-contiguous array arguments (diofant matrices)</li>
<li>ccode must raise an error when it encounters something that can not be
translated into c. ccode(integrate(sin(x)/x, x)) does not make sense.</li>
<li>Complex numbers as input and output</li>
<li>A default complex datatype</li>
<li>Include extra information in the header: date, user, hostname, sha1
hash, …</li>
<li>Fortran 77</li>
<li>C++</li>
<li>Python</li>
<li>…</li>
</ul>
<dl class="class">
<dt id="diofant.utilities.codegen.Routine">
<em class="property">class </em><code class="descclassname">diofant.utilities.codegen.</code><code class="descname">Routine</code><span class="sig-paren">(</span><em>name</em>, <em>arguments</em>, <em>results</em>, <em>local_vars</em>, <em>global_vars</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/diofant/utilities/codegen.html#Routine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#diofant.utilities.codegen.Routine" title="Permalink to this definition">¶</a></dt>
<dd><p>Generic description of evaluation routine for set of expressions.</p>
<p>A CodeGen class can translate instances of this class into code in a
particular language.  The routine specification covers all the features
present in these languages.  The CodeGen part must raise an exception
when certain features are not present in the target language.  For
example, multiple return values are possible in Python, but not in C or
Fortran.  Another example: Fortran and Python support complex numbers,
while C does not.</p>
<dl class="attribute">
<dt id="diofant.utilities.codegen.Routine.result_variables">
<code class="descname">result_variables</code><a class="headerlink" href="#diofant.utilities.codegen.Routine.result_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of OutputArgument, InOutArgument and Result.</p>
<p>If return values are present, they are at the end ot the list.</p>
</dd></dl>

<dl class="attribute">
<dt id="diofant.utilities.codegen.Routine.variables">
<code class="descname">variables</code><a class="headerlink" href="#diofant.utilities.codegen.Routine.variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a set of all variables possibly used in the routine.</p>
<p>For routines with unnamed return values, the dummies that may or
may not be used will be included in the set.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="diofant.utilities.codegen.DataType">
<em class="property">class </em><code class="descclassname">diofant.utilities.codegen.</code><code class="descname">DataType</code><span class="sig-paren">(</span><em>cname</em>, <em>fname</em>, <em>pyname</em>, <em>octname</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/diofant/utilities/codegen.html#DataType"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#diofant.utilities.codegen.DataType" title="Permalink to this definition">¶</a></dt>
<dd><p>Holds strings for a certain datatype in different languages.</p>
</dd></dl>

<dl class="function">
<dt id="diofant.utilities.codegen.get_default_datatype">
<code class="descclassname">diofant.utilities.codegen.</code><code class="descname">get_default_datatype</code><span class="sig-paren">(</span><em>expr</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/diofant/utilities/codegen.html#get_default_datatype"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#diofant.utilities.codegen.get_default_datatype" title="Permalink to this definition">¶</a></dt>
<dd><p>Derives an appropriate datatype based on the expression.</p>
</dd></dl>

<dl class="class">
<dt id="diofant.utilities.codegen.Argument">
<em class="property">class </em><code class="descclassname">diofant.utilities.codegen.</code><code class="descname">Argument</code><span class="sig-paren">(</span><em>name</em>, <em>datatype=None</em>, <em>dimensions=None</em>, <em>precision=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/diofant/utilities/codegen.html#Argument"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#diofant.utilities.codegen.Argument" title="Permalink to this definition">¶</a></dt>
<dd><p>An abstract Argument data structure: a name and a data type.</p>
<p>This structure is refined in the descendants below.</p>
</dd></dl>

<dl class="class">
<dt id="diofant.utilities.codegen.Result">
<em class="property">class </em><code class="descclassname">diofant.utilities.codegen.</code><code class="descname">Result</code><span class="sig-paren">(</span><em>expr</em>, <em>name=None</em>, <em>result_var=None</em>, <em>datatype=None</em>, <em>dimensions=None</em>, <em>precision=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/diofant/utilities/codegen.html#Result"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#diofant.utilities.codegen.Result" title="Permalink to this definition">¶</a></dt>
<dd><p>An expression for a return value.</p>
<p>The name result is used to avoid conflicts with the reserved word
“return” in the python language.  It is also shorter than ReturnValue.</p>
<p>These may or may not need a name in the destination (e.g., “return(x*y)”
might return a value without ever naming it).</p>
</dd></dl>

<dl class="class">
<dt id="diofant.utilities.codegen.CodeGen">
<em class="property">class </em><code class="descclassname">diofant.utilities.codegen.</code><code class="descname">CodeGen</code><span class="sig-paren">(</span><em>project='project'</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/diofant/utilities/codegen.html#CodeGen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#diofant.utilities.codegen.CodeGen" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract class for the code generators.</p>
<dl class="method">
<dt id="diofant.utilities.codegen.CodeGen.dump_code">
<code class="descname">dump_code</code><span class="sig-paren">(</span><em>routines</em>, <em>f</em>, <em>prefix</em>, <em>header=True</em>, <em>empty=True</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/diofant/utilities/codegen.html#CodeGen.dump_code"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#diofant.utilities.codegen.CodeGen.dump_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the code by calling language specific methods.</p>
<p>The generated file contains all the definitions of the routines in
low-level code and refers to the header file if appropriate.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>routines</strong> (<em>list</em>) – A list of Routine instances.</li>
<li><strong>f</strong> (<em>file-like</em>) – Where to write the file.</li>
<li><strong>prefix</strong> (<em>string</em>) – The filename prefix, used to refer to the proper header file.
Only the basename of the prefix is used.</li>
<li><strong>header</strong> (<em>bool, optional</em>) – When True, a header comment is included on top of each source
file.  [default : True]</li>
<li><strong>empty</strong> (<em>bool, optional</em>) – When True, empty lines are included to structure the source
files.  [default : True]</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="diofant.utilities.codegen.CodeGen.routine">
<code class="descname">routine</code><span class="sig-paren">(</span><em>name</em>, <em>expr</em>, <em>argument_sequence</em>, <em>global_vars</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/diofant/utilities/codegen.html#CodeGen.routine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#diofant.utilities.codegen.CodeGen.routine" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an Routine object that is appropriate for this language.</p>
<p>This implementation is appropriate for at least C/Fortran.  Subclasses
can override this if necessary.</p>
<p>Here, we assume at most one return value (the l-value) which must be
scalar.  Additional outputs are OutputArguments (e.g., pointers on
right-hand-side or pass-by-reference).  Matrices are always returned
via OutputArguments.  If <code class="docutils literal notranslate"><span class="pre">argument_sequence</span></code> is None, arguments will
be ordered alphabetically, but with all InputArguments first, and then
OutputArgument and InOutArguments.</p>
</dd></dl>

<dl class="method">
<dt id="diofant.utilities.codegen.CodeGen.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>routines</em>, <em>prefix</em>, <em>to_files=False</em>, <em>header=True</em>, <em>empty=True</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/diofant/utilities/codegen.html#CodeGen.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#diofant.utilities.codegen.CodeGen.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes all the source code files for the given routines.</p>
<p>The generated source is returned as a list of (filename, contents)
tuples, or is written to files (see below).  Each filename consists
of the given prefix, appended with an appropriate extension.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>routines</strong> (<em>list</em>) – A list of Routine instances to be written</li>
<li><strong>prefix</strong> (<em>string</em>) – The prefix for the output files</li>
<li><strong>to_files</strong> (<em>bool, optional</em>) – When True, the output is written to files.  Otherwise, a list
of (filename, contents) tuples is returned.  [default: False]</li>
<li><strong>header</strong> (<em>bool, optional</em>) – When True, a header comment is included on top of each source
file. [default: True]</li>
<li><strong>empty</strong> (<em>bool, optional</em>) – When True, empty lines are included to structure the source
files. [default: True]</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="diofant.utilities.codegen.CCodeGen">
<em class="property">class </em><code class="descclassname">diofant.utilities.codegen.</code><code class="descname">CCodeGen</code><span class="sig-paren">(</span><em>project='project'</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/diofant/utilities/codegen.html#CCodeGen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#diofant.utilities.codegen.CCodeGen" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator for C code.</p>
<p>The .write() method inherited from CodeGen will output a code file and
an interface file, &lt;prefix&gt;.c and &lt;prefix&gt;.h respectively.</p>
<dl class="method">
<dt id="diofant.utilities.codegen.CCodeGen.dump_c">
<code class="descname">dump_c</code><span class="sig-paren">(</span><em>routines</em>, <em>f</em>, <em>prefix</em>, <em>header=True</em>, <em>empty=True</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/diofant/utilities/codegen.html#CCodeGen.dump_c"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#diofant.utilities.codegen.CCodeGen.dump_c" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the code by calling language specific methods.</p>
<p>The generated file contains all the definitions of the routines in
low-level code and refers to the header file if appropriate.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>routines</strong> (<em>list</em>) – A list of Routine instances.</li>
<li><strong>f</strong> (<em>file-like</em>) – Where to write the file.</li>
<li><strong>prefix</strong> (<em>string</em>) – The filename prefix, used to refer to the proper header file.
Only the basename of the prefix is used.</li>
<li><strong>header</strong> (<em>bool, optional</em>) – When True, a header comment is included on top of each source
file.  [default : True]</li>
<li><strong>empty</strong> (<em>bool, optional</em>) – When True, empty lines are included to structure the source
files.  [default : True]</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="diofant.utilities.codegen.CCodeGen.dump_h">
<code class="descname">dump_h</code><span class="sig-paren">(</span><em>routines</em>, <em>f</em>, <em>prefix</em>, <em>header=True</em>, <em>empty=True</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/diofant/utilities/codegen.html#CCodeGen.dump_h"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#diofant.utilities.codegen.CCodeGen.dump_h" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the C header file.</p>
<p>This file contains all the function declarations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>routines</strong> (<em>list</em>) – A list of Routine instances.</li>
<li><strong>f</strong> (<em>file-like</em>) – Where to write the file.</li>
<li><strong>prefix</strong> (<em>string</em>) – The filename prefix, used to construct the include guards.
Only the basename of the prefix is used.</li>
<li><strong>header</strong> (<em>bool, optional</em>) – When True, a header comment is included on top of each source
file.  [default : True]</li>
<li><strong>empty</strong> (<em>bool, optional</em>) – When True, empty lines are included to structure the source
files.  [default : True]</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="diofant.utilities.codegen.CCodeGen.get_prototype">
<code class="descname">get_prototype</code><span class="sig-paren">(</span><em>routine</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/diofant/utilities/codegen.html#CCodeGen.get_prototype"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#diofant.utilities.codegen.CCodeGen.get_prototype" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a string for the function prototype of the routine.</p>
<p>If the routine has multiple result objects, an CodeGenError is
raised.</p>
<p>See: <a class="reference external" href="https://en.wikipedia.org/wiki/Function_prototype">https://en.wikipedia.org/wiki/Function_prototype</a></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="diofant.utilities.codegen.FCodeGen">
<em class="property">class </em><code class="descclassname">diofant.utilities.codegen.</code><code class="descname">FCodeGen</code><span class="sig-paren">(</span><em>project='project'</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/diofant/utilities/codegen.html#FCodeGen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#diofant.utilities.codegen.FCodeGen" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator for Fortran 95 code</p>
<p>The .write() method inherited from CodeGen will output a code file and
an interface file, &lt;prefix&gt;.f90 and &lt;prefix&gt;.h respectively.</p>
<dl class="method">
<dt id="diofant.utilities.codegen.FCodeGen.dump_f95">
<code class="descname">dump_f95</code><span class="sig-paren">(</span><em>routines</em>, <em>f</em>, <em>prefix</em>, <em>header=True</em>, <em>empty=True</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/diofant/utilities/codegen.html#FCodeGen.dump_f95"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#diofant.utilities.codegen.FCodeGen.dump_f95" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the code by calling language specific methods.</p>
<p>The generated file contains all the definitions of the routines in
low-level code and refers to the header file if appropriate.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>routines</strong> (<em>list</em>) – A list of Routine instances.</li>
<li><strong>f</strong> (<em>file-like</em>) – Where to write the file.</li>
<li><strong>prefix</strong> (<em>string</em>) – The filename prefix, used to refer to the proper header file.
Only the basename of the prefix is used.</li>
<li><strong>header</strong> (<em>bool, optional</em>) – When True, a header comment is included on top of each source
file.  [default : True]</li>
<li><strong>empty</strong> (<em>bool, optional</em>) – When True, empty lines are included to structure the source
files.  [default : True]</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="diofant.utilities.codegen.FCodeGen.dump_h">
<code class="descname">dump_h</code><span class="sig-paren">(</span><em>routines</em>, <em>f</em>, <em>prefix</em>, <em>header=True</em>, <em>empty=True</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/diofant/utilities/codegen.html#FCodeGen.dump_h"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#diofant.utilities.codegen.FCodeGen.dump_h" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the interface to a header file.</p>
<p>This file contains all the function declarations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>routines</strong> (<em>list</em>) – A list of Routine instances.</li>
<li><strong>f</strong> (<em>file-like</em>) – Where to write the file.</li>
<li><strong>prefix</strong> (<em>string</em>) – The filename prefix.</li>
<li><strong>header</strong> (<em>bool, optional</em>) – When True, a header comment is included on top of each source
file.  [default : True]</li>
<li><strong>empty</strong> (<em>bool, optional</em>) – When True, empty lines are included to structure the source
files.  [default : True]</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="diofant.utilities.codegen.FCodeGen.get_interface">
<code class="descname">get_interface</code><span class="sig-paren">(</span><em>routine</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/diofant/utilities/codegen.html#FCodeGen.get_interface"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#diofant.utilities.codegen.FCodeGen.get_interface" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a string for the function interface.</p>
<p>The routine should have a single result object, which can be None.
If the routine has multiple result objects, a CodeGenError is
raised.</p>
<p>See: <a class="reference external" href="https://en.wikipedia.org/wiki/Function_prototype">https://en.wikipedia.org/wiki/Function_prototype</a></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="diofant.utilities.codegen.OctaveCodeGen">
<em class="property">class </em><code class="descclassname">diofant.utilities.codegen.</code><code class="descname">OctaveCodeGen</code><span class="sig-paren">(</span><em>project='project'</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/diofant/utilities/codegen.html#OctaveCodeGen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#diofant.utilities.codegen.OctaveCodeGen" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator for Octave code.</p>
<p>The .write() method inherited from CodeGen will output a code file
&lt;prefix&gt;.m.</p>
<p>Octave .m files usually contain one function.  That function name should
match the filename (<code class="docutils literal notranslate"><span class="pre">prefix</span></code>).  If you pass multiple <code class="docutils literal notranslate"><span class="pre">name_expr</span></code> pairs,
the latter ones are presumed to be private functions accessed by the
primary function.</p>
<p>You should only pass inputs to <code class="docutils literal notranslate"><span class="pre">argument_sequence</span></code>: outputs are ordered
according to their order in <code class="docutils literal notranslate"><span class="pre">name_expr</span></code>.</p>
<dl class="method">
<dt id="diofant.utilities.codegen.OctaveCodeGen.dump_m">
<code class="descname">dump_m</code><span class="sig-paren">(</span><em>routines</em>, <em>f</em>, <em>prefix</em>, <em>header=True</em>, <em>empty=True</em>, <em>inline=True</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/diofant/utilities/codegen.html#OctaveCodeGen.dump_m"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#diofant.utilities.codegen.OctaveCodeGen.dump_m" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the code by calling language specific methods.</p>
<p>The generated file contains all the definitions of the routines in
low-level code and refers to the header file if appropriate.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>routines</strong> (<em>list</em>) – A list of Routine instances.</li>
<li><strong>f</strong> (<em>file-like</em>) – Where to write the file.</li>
<li><strong>prefix</strong> (<em>string</em>) – The filename prefix, used to refer to the proper header file.
Only the basename of the prefix is used.</li>
<li><strong>header</strong> (<em>bool, optional</em>) – When True, a header comment is included on top of each source
file.  [default : True]</li>
<li><strong>empty</strong> (<em>bool, optional</em>) – When True, empty lines are included to structure the source
files.  [default : True]</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="diofant.utilities.codegen.OctaveCodeGen.routine">
<code class="descname">routine</code><span class="sig-paren">(</span><em>name</em>, <em>expr</em>, <em>argument_sequence</em>, <em>global_vars</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/diofant/utilities/codegen.html#OctaveCodeGen.routine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#diofant.utilities.codegen.OctaveCodeGen.routine" title="Permalink to this definition">¶</a></dt>
<dd><p>Specialized Routine creation for Octave.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="diofant.utilities.codegen.codegen">
<code class="descclassname">diofant.utilities.codegen.</code><code class="descname">codegen</code><span class="sig-paren">(</span><em>name_expr</em>, <em>language</em>, <em>prefix=None</em>, <em>project='project'</em>, <em>to_files=False</em>, <em>header=True</em>, <em>empty=True</em>, <em>argument_sequence=None</em>, <em>global_vars=None</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/diofant/utilities/codegen.html#codegen"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#diofant.utilities.codegen.codegen" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate source code for expressions in a given language.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name_expr</strong> (<em>tuple, or list of tuples</em>) – A single (name, expression) tuple or a list of (name, expression)
tuples.  Each tuple corresponds to a routine.  If the expression is
an equality (an instance of class Equality) the left hand side is
considered an output argument.  If expression is an iterable, then
the routine will have multiple outputs.</li>
<li><strong>language</strong> (<em>string</em>) – A string that indicates the source code language.  This is case
insensitive.  Currently, ‘C’, ‘F95’ and ‘Octave’ are supported.
‘Octave’ generates code compatible with both Octave and Matlab.</li>
<li><strong>prefix</strong> (<em>string, optional</em>) – A prefix for the names of the files that contain the source code.
Language-dependent suffixes will be appended.  If omitted, the name
of the first name_expr tuple is used.</li>
<li><strong>project</strong> (<em>string, optional</em>) – A project name, used for making unique preprocessor instructions.
[default: “project”]</li>
<li><strong>to_files</strong> (<em>bool, optional</em>) – When True, the code will be written to one or more files with the
given prefix, otherwise strings with the names and contents of
these files are returned. [default: False]</li>
<li><strong>header</strong> (<em>bool, optional</em>) – When True, a header is written on top of each source file.
[default: True]</li>
<li><strong>empty</strong> (<em>bool, optional</em>) – When True, empty lines are used to structure the code.
[default: True]</li>
<li><strong>argument_sequence</strong> (<em>iterable, optional</em>) – Sequence of arguments for the routine in a preferred order.  A
CodeGenError is raised if required arguments are missing.
Redundant arguments are used without warning.  If omitted,
arguments will be ordered alphabetically, but with all input
aguments first, and then output or in-out arguments.</li>
<li><strong>global_vars</strong> (<em>iterable, optional</em>) – Sequence of global variables used by the routine.  Variables
listed here will not show up as function arguments.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">[(</span><span class="n">c_name</span><span class="p">,</span> <span class="n">c_code</span><span class="p">),</span> <span class="p">(</span><span class="n">h_name</span><span class="p">,</span> <span class="n">c_header</span><span class="p">)]</span> <span class="o">=</span> <span class="n">codegen</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;f&quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="o">*</span><span class="n">z</span><span class="p">),</span> <span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="s2">&quot;test&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">empty</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">c_name</span><span class="p">)</span>
<span class="go">test.c</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">c_code</span><span class="p">)</span>
<span class="go">#include &quot;test.h&quot;</span>
<span class="go">#include &lt;math.h&gt;</span>
<span class="go">double f(double x, double y, double z) {</span>
<span class="go">  double f_result;</span>
<span class="go">  f_result = x + y*z;</span>
<span class="go">  return f_result;</span>
<span class="go">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">h_name</span><span class="p">)</span>
<span class="go">test.h</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">c_header</span><span class="p">)</span>
<span class="go">#ifndef PROJECT__TEST__H</span>
<span class="go">#define PROJECT__TEST__H</span>
<span class="go">double f(double x, double y, double z);</span>
<span class="go">#endif</span>
</pre></div>
</div>
<p>Another example using Equality objects to give named outputs.  Here the
filename (prefix) is taken from the first (name, expr) pair.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">diofant.abc</span> <span class="k">import</span> <span class="n">f</span><span class="p">,</span> <span class="n">g</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[(</span><span class="n">c_name</span><span class="p">,</span> <span class="n">c_code</span><span class="p">),</span> <span class="p">(</span><span class="n">h_name</span><span class="p">,</span> <span class="n">c_header</span><span class="p">)]</span> <span class="o">=</span> <span class="n">codegen</span><span class="p">(</span>
<span class="gp">... </span>     <span class="p">[(</span><span class="s2">&quot;myfcn&quot;</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;fcn2&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">Eq</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="p">),</span> <span class="n">Eq</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">y</span><span class="p">)])],</span>
<span class="gp">... </span>     <span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">empty</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">c_name</span><span class="p">)</span>
<span class="go">myfcn.c</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">c_code</span><span class="p">)</span>
<span class="go">#include &quot;myfcn.h&quot;</span>
<span class="go">#include &lt;math.h&gt;</span>
<span class="go">double myfcn(double x, double y) {</span>
<span class="go">   double myfcn_result;</span>
<span class="go">   myfcn_result = x + y;</span>
<span class="go">   return myfcn_result;</span>
<span class="go">}</span>
<span class="go">void fcn2(double x, double y, double *f, double *g) {</span>
<span class="go">   (*f) = 2*x;</span>
<span class="go">   (*g) = y;</span>
<span class="go">}</span>
</pre></div>
</div>
<p>If the generated function(s) will be part of a larger project where various
global variables have been defined, the ‘global_vars’ option can be used
to remove the specified variables from the function signature</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">[(</span><span class="n">f_name</span><span class="p">,</span> <span class="n">f_code</span><span class="p">),</span> <span class="n">header</span><span class="p">]</span> <span class="o">=</span> <span class="n">codegen</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">(</span><span class="s2">&quot;f&quot;</span><span class="p">,</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="o">*</span><span class="n">z</span><span class="p">),</span> <span class="s2">&quot;F95&quot;</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">empty</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">argument_sequence</span><span class="o">=</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="n">global_vars</span><span class="o">=</span><span class="p">(</span><span class="n">z</span><span class="p">,))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">f_code</span><span class="p">)</span>
<span class="go">REAL*8 function f(x, y)</span>
<span class="go">implicit none</span>
<span class="go">REAL*8, intent(in) :: x</span>
<span class="go">REAL*8, intent(in) :: y</span>
<span class="go">f = x + y*z</span>
<span class="go">end function</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="diofant.utilities.codegen.make_routine">
<code class="descclassname">diofant.utilities.codegen.</code><code class="descname">make_routine</code><span class="sig-paren">(</span><em>name</em>, <em>expr</em>, <em>argument_sequence=None</em>, <em>global_vars=None</em>, <em>language='F95'</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/diofant/utilities/codegen.html#make_routine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#diofant.utilities.codegen.make_routine" title="Permalink to this definition">¶</a></dt>
<dd><p>A factory that makes an appropriate Routine from an expression.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<em>string</em>) – The name of this routine in the generated code.</li>
<li><strong>expr</strong> (<em>expression or list/tuple of expressions</em>) – A Diofant expression that the Routine instance will represent.  If
given a list or tuple of expressions, the routine will be
considered to have multiple return values and/or output arguments.</li>
<li><strong>argument_sequence</strong> (<em>list or tuple, optional</em>) – List arguments for the routine in a preferred order.  If omitted,
the results are language dependent, for example, alphabetical order
or in the same order as the given expressions.</li>
<li><strong>global_vars</strong> (<em>iterable, optional</em>) – Sequence of global variables used by the routine.  Variables
listed here will not show up as function arguments.</li>
<li><strong>language</strong> (<em>string, optional</em>) – Specify a target language.  The Routine itself should be
language-agnostic but the precise way one is created, error
checking, etc depend on the language.  [default: “F95”].</li>
<li><strong>A decision about whether to use output arguments or return values is made</strong></li>
<li><strong>depending on both the language and the particular mathematical expressions.</strong></li>
<li><strong>For an expression of type Equality, the left hand side is typically made</strong></li>
<li><strong>into an OutputArgument (or perhaps an InOutArgument if appropriate).</strong></li>
<li><strong>Otherwise, typically, the calculated expression is made a return values of</strong></li>
<li><strong>the routine.</strong></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">diofant.abc</span> <span class="k">import</span> <span class="n">f</span><span class="p">,</span> <span class="n">g</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">make_routine</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">Eq</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">x</span><span class="p">),</span> <span class="n">Eq</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">arg</span><span class="o">.</span><span class="n">result_var</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">results</span><span class="p">]</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">arg</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">arguments</span><span class="p">]</span>
<span class="go">[x, y, f, g]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">arg</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">result_variables</span><span class="p">]</span>
<span class="go">[f, g]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span><span class="o">.</span><span class="n">local_vars</span>
<span class="go">set()</span>
</pre></div>
</div>
<p>Another more complicated example with a mixture of specified and
automatically-assigned names.  Also has Matrix output.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">make_routine</span><span class="p">(</span><span class="s1">&#39;fcn&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">,</span> <span class="n">Eq</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">Eq</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">g</span><span class="p">),</span> <span class="n">Matrix</span><span class="p">([[</span><span class="n">x</span><span class="p">,</span> <span class="mi">2</span><span class="p">]])])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">arg</span><span class="o">.</span><span class="n">result_var</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">results</span><span class="p">]</span>
<span class="go">[result_...]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">arg</span><span class="o">.</span><span class="n">expr</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">results</span><span class="p">]</span>
<span class="go">[x*y]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">arg</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">arguments</span><span class="p">]</span>
<span class="go">[x, y, f, g, out_...]</span>
</pre></div>
</div>
<p>We can examine the various arguments more closely:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">arguments</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">InputArgument</span><span class="p">)]</span>
<span class="go">[x, y]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">arguments</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">OutputArgument</span><span class="p">)]</span>
<span class="go">[f, out_...]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">expr</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">arguments</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">OutputArgument</span><span class="p">)]</span>
<span class="go">[1, Matrix([[x, 2]])]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">arguments</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">InOutArgument</span><span class="p">)]</span>
<span class="go">[g]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">a</span><span class="o">.</span><span class="n">expr</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">arguments</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">InOutArgument</span><span class="p">)]</span>
<span class="go">[g + x]</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="decorator.html" class="btn btn-neutral float-right" title="Decorator" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="autowrap.html" class="btn btn-neutral float-left" title="Autowrap Module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2006-2018 SymPy Development Team, 2013-2019 Sergey B Kirpichev

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>